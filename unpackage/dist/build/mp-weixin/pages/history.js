(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/history"],{5858:function(e,t,a){"use strict";var n=a("76c7"),i=a.n(n);i.a},"76c7":function(e,t,a){},a91f:function(e,t,a){"use strict";(function(e){a("fae7");n(a("66fd"));var t=n(a("f0a9"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},b9d3:function(e,t,a){"use strict";a.r(t);var n=a("face"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},c7b2:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement;e._self._c},r=[]},f0a9:function(e,t,a){"use strict";a.r(t);var n=a("c7b2"),i=a("b9d3");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("5858");var o,u=a("f0c5"),c=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,"5a136f7f",null,!1,n["a"],o);t["default"]=c.exports},face:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("a34a"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n,i,r,o){try{var u=e[r](o),c=u.value}catch(d){return void a(d)}u.done?t(c):Promise.resolve(c).then(n,i)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function u(e){r(o,n,i,u,c,"next",e)}function c(e){r(o,n,i,u,c,"throw",e)}u(void 0)}))}}var u=function(){a.e("components/dropdown/dt-dropdown").then(function(){return resolve(a("f4be"))}.bind(null,a)).catch(a.oe)},c={components:{dropdown:u},data:function(){return{flagNewUser:!0,listDropdown:["气体浓度","压力大小"],valueDate:"",valueDate2:"",startTime:void 0,endTime:void 0,valueSelect:0,isBtnShow:!0,dataTable:[],productKey:void 0,devKeyNitrogen:void 0,devKeyAirCheck:void 0,devKeyHardware:void 0,devKeyGas:void 0,devKeyPressure:void 0,devKeyBug:void 0}},computed:{dataTable2:function(){var e=this;return this.dataTable.filter((function(t){return t.type===e.valueSelect}))}},onShow:function(){this.initializeTime(),this.flagNewUser&&(this.start(),this.flagNewUser=!1)},methods:{dropDownChange:function(t){var a=this;t!==this.valueSelect&&(e.showLoading(),setTimeout((function(){a.valueSelect=t,e.hideLoading()}),300))},bindDateChange:function(e){this.valueDate=e.detail.value},bindDateChange2:function(e){this.valueDate2=e.detail.value},start:function(){var t=this;return o(n.default.mark((function a(){var i,r,o;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.showLoading(),a.next=3,t.$api.getProduct();case 3:if(i=a.sent,200===i.code){a.next=6;break}return a.abrupt("return",e.hideLoading());case 6:if(r=i.data.productInfo.find((function(e){return"N2"===e.typeIdentify})),r){a.next=11;break}return t.$message("您未安装相关制氮设备",3),e.hideLoading(),a.abrupt("return");case 11:return t.productKey=r.productKey,a.next=14,t.$api.getDeviceList(r.productKey);case 14:if(o=a.sent,200===o.code){a.next=17;break}return a.abrupt("return");case 17:o.data.deviceInfo.forEach((function(e){switch(e.deviceType){case"N2":t.devKeyNitrogen=e.deviceKey;break;case"airCheck":t.devKeyAirCheck=e.deviceKey;break;case"hardware":t.devKeyHardware=e.deviceKey;break;case"xc-air":t.devKeyGas=e.deviceKey;break;case"xc-pressure":t.devKeyPressure=e.deviceKey;break;case"xc-bug":t.devKeyBug=e.deviceKey;break}})),t.initializeTime(),t.getGasPreData();case 20:case"end":return a.stop()}}),a)})))()},initializeTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth(),n=e.getDate();this.valueDate=t+"-"+(a+1<10?"0"+(a+1):a+1)+"-"+(n<10?"0"+n:n),this.valueDate2=this.valueDate,this.startTime=new Date(t,a,n).getTime(),this.endTime=new Date(t,a,n).getTime()+864e5},getGasPreData:function(){var t=this;return o(n.default.mark((function a(){var i,r;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.showLoading(),console.log("获取气体、压力记录"),console.log("开始时间："+t.$time2date(t.startTime)),console.log("结束时间："+t.$time2date(t.endTime)),a.next=6,t.$api.getHistoryData(t.devKeyHardware,t.startTime,t.endTime);case 6:if(i=a.sent,e.hideLoading(),200===i.code){a.next=11;break}return t.dataTable=[],a.abrupt("return");case 11:r=i.data.deviceData.filter((function(e){return!("o2"in e)})),r.forEach((function(e){if("Custom"in e){var t=0,a=-9999,n=9999;e.n2.forEach((function(i,r){e["n2_"+(r+1)]=i.toFixed(2),t+=i,a=i>a?i:a,n=i<n?i:n})),e.n2_max=-9999===a?0:a.toFixed(2),e.n2_min=9999===n?0:n.toFixed(2),e.n2_ave=(t/9).toFixed(2),e.type=0}else"in_Pa"in e?(e.in_Pa=e.in_Pa.toFixed(1),e.type=1):e.type=99})),t.dataTable=Object.freeze(r),e.hideLoading(),console.log(t.dataTable);case 16:case"end":return a.stop()}}),a)})))()},getLogs:function(){console.log("获取操作日志"),setTimeout((function(){e.hideLoading()}),300)},handleClick:function(){console.log("点击查询");var e=this.valueDate.split("-"),t=this.valueDate2.split("-"),a=new Date(parseInt(e[0]),parseInt(e[1])-1,parseInt(e[2])).getTime(),n=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])).getTime();if(a>n){var i=n;n=a+864e5,a=i;var r=this.valueDate2;this.valueDate2=this.valueDate,this.valueDate=r}else n+=864e5;this.startTime=a,this.endTime=n,this.getGasPreData()}}};t.default=c}).call(this,a("543d")["default"])}},[["a91f","common/runtime","common/vendor"]]]);